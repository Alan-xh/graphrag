# 更新日志
注意：0.x.y 范围内的版本发布可能会引入重大更改。

## 2.3.0(未更新到本地)

- 次要更新：移除动态最大重试次数支持。重构 cli 界面中的 typer 输入
- 次要更新：将 fnllm 更新至最新版本。更新默认 graphrag 配置
- 补丁：修复一些问题并增强功能，以提高复用性和流程。
- 补丁：将完整的 llm 响应添加到 LLM 提供程序输出
- 补丁：修复非流式调用的漂移 Reduce 响应
- 补丁：修复全局搜索提示，使其包含缺失的格式键
- 补丁：将 pyarrow 依赖项升级到 >=17.0.0 以修复 CVE-2024-52338

## 2.2.1

- 补丁：修复社区报告提示调整响应
- 补丁：修复图创建缺少边权重的问题。
- 补丁：更新工作流

## 2.2.0

- 次要：支持 OpenAI 推理模型。
- 补丁：添加选项以快照原始提取的图表。
- 补丁：在提示调整自动选择嵌入工作流中添加了批处理逻辑
- 补丁：更好地对齐配置类和文档。
- 补丁：将嵌入表加载与配置字段对齐。
- 补丁：与我们最新的 NLP 提取方法保持一致。
- 补丁：将 fnllm 修复到 0.2.3
- 补丁：基本搜索的修复。
- 补丁：更新 llm 参数以保持一致性。
- 补丁：添加向量存储集成测试

## 2.1.0

- 次要：添加对 JSON 输入文件的支持。
- 次要：更新了提示调整客户端，以支持 csv 元数据注入，并更新了输出文件类型以匹配新的命名约定。
- 补丁：在配置加载时检查自定义模型类型
- 补丁：添加通用管道运行状态对象。

## 2.0.0

- 主要：为社区添加子级以避免重新计算。
- 主要：重新组织和重命名工作流及其输出。
- 主要：重做 API 以接受回调。
- 次要：添加 LMM 管理器和工厂，以支持提供商注册
- 次要：添加 NLP 图提取。
- 次要：添加 pipeline_start 和 pipeline_end 回调。
- 次要：将嵌入快照移动到工作流运行器。
- 次要：删除配置继承、填充和自动环境变量覆盖。
- 次要：重做更新输出存储结构。
- 补丁：为 NLP 提取器添加缓存。
- 补丁：添加向量存储 ID 引用到嵌入配置。
- 补丁：导出 NLP 社区报告提示。
- 补丁：修复 Azure AI Search 上的 DRIFT 搜索。
- 补丁：修复 StopAsyncIteration 捕获。
- 补丁：修复 FastGraphRAG 中缺失的嵌入工作流。
- 补丁：修复 drift 搜索中 n_depth 的正确使用
- 补丁：修复报告生成递归。
- 补丁：修复用于增量索引的大型数据集的摘要。修复关系摘要
- 补丁：通过从代码中删除一些 iterrows 来优化数据迭代
- 补丁：社区报告的补丁 json 模式
- 补丁：在更新期间正确递增文本单元 ID。
- 补丁：将配置默认值从常量重构为类型安全的、分层的 dataclass。
- 补丁：使用 AOI 时需要明确的 azure 身份验证设置。
- 补丁：分离图修剪以进行差异使用。
- 补丁：将流函数置于其工作流模块之下。
- 补丁：更新 fnllm。删除未使用的库。
- 补丁：使用 ModelProvider 用于查询模块
- 补丁：使用共享模式进行最终输出。
- 补丁：添加动态重试逻辑。
- 补丁：添加选项以将元数据前置到块中
- 补丁：清理查询代码重复。
- 补丁：实现了 API 层的多索引查询
- 补丁：多索引查询 CLI 支持
- 补丁：删除未使用的列并将属性 document_attribute_columns 更改为 metadata
- 补丁：更新多索引查询以支持新工作流

## 1.2.0

- 次要：添加 Drift Reduce 响应和流式传输端点
- 次要：添加 cosmosdb 向量存储
- 补丁：修复示例笔记本
- 补丁：设置默认速率限制。
- 补丁：text_splitting 的单元测试

## 1.2.0

- 补丁：基本 Rag 次要修复

## 1.1.1

- 补丁：修复为动态搜索创建社区层次结构时的错误
- 补丁：将 LOCAL_SEARCH_COMMUNITY_PROP 增加到 15%

## 1.1.0

- 次要：使 gleanings 独立于编码
- 次要：删除 DataShaper（第一步）。
- 次要：删除旧的管道运行器。
- 次要：新的搜索实现为 API 的新选项
- 补丁：修复 gleanings 循环检查
- 补丁：实现 cosmosdb 存储选项用于缓存和输出
- 补丁：将提取器代码移动到与操作共存。
- 补丁：删除配置输入模型。
- 补丁：Ruff 更新
- 补丁：简化和精简内部配置。
- 补丁：简化回调模型。
- 补丁：精简流程。
- 补丁：修复存储类的实例化。

## 1.0.1

- 补丁：修复编码模型配置解析
- 补丁：修复错误回调时的异常
- 补丁：在缓存的单例中管理 llm 实例。在实体/关系提取后检查空 dfs
- 补丁：遵守 encoding_model 选项

## 1.0.0

- 补丁：将父 ID 添加到社区数据模型
- 补丁：添加迁移笔记本。
- 补丁：创建单独的社区工作流，折叠子流。
- 补丁：依赖更新
- 补丁：清理和重构工厂类。

## 0.9.0

- 次要：重构图创建。
- 补丁：依赖更新
- 补丁：修复动态社区选择的全局搜索错误
- 补丁：修复问题生成。
- 补丁：优化最终社区报告计算并稳定缓存
- 补丁：杂项代码清理和次要更改，以更好地对齐整个代码库的样式。
- 补丁：将 llm 包替换为 fnllm
- 补丁：将 md5 哈希替换为 sha256
- 补丁：将 md5 哈希替换为 sha512
- 补丁：更新 API 并添加演示笔记本

## 0.5.0

- 次要：数据模型更改。
- 补丁：在不存在时将 Parquet 添加为默认的发射器之一
- 补丁：集中提示并全部导出以便于注入。
- 补丁：清理工件输出/模式。
- 补丁：配置和文档更新。
- 补丁：实现动态社区选择到全局搜索
- 补丁：修复现有文件/目录路径的自动完成。
- 补丁：将导入语句移出 init 文件

## 0.4.1

- 补丁：添加更新 CLI 入口点用于增量索引
- 补丁：允许某些 CI/CD 作业跳过仅用于文档更新的 PR。
- 补丁：修复 viz 指南中的文件路径问题。
- 补丁：修复增量索引中的可选协变量更新
- 补丁：增量索引的空增量引发错误
- 补丁：将可视化指南添加到文档站点
- 补丁：修复流式传输输出错误

## 0.4.0

- 次要：添加增量索引
- 次要：添加 DRIFT 图推理查询模块
- 次要：嵌入已移至不同的工作流
- 补丁：添加 DRIFT 搜索 CLI 和示例笔记本
- 补丁：添加增量更新的配置
- 补丁：将嵌入添加到子流。
- 补丁：添加使用时间段的朴素社区合并
- 补丁：添加关系合并
- 补丁：添加仅运行时存储选项。
- 补丁：添加文本单元更新
- 补丁：允许空工作流返回以避免磁盘写入。
- 补丁：应用 pandas 优化以创建最终实体
- 补丁：计算更新时的新输入和已删除输入
- 补丁：折叠协变量流。
- 补丁：折叠 create-base-entity-graph。
- 补丁：折叠 create-final-community-reports。
- 补丁：折叠 create-final-documents。
- 补丁：折叠 create-final-entities。
- 补丁：折叠 create-final-nodes。
- 补丁：折叠 create_base_documents。
- 补丁：折叠 create_base_text_units。
- 补丁：折叠 create_final_relationships。
- 补丁：折叠实体提取。
- 补丁：折叠实体摘要。
- 补丁：折叠中间工作流输出。
- 补丁：依赖更新
- 补丁：提取无 DataShaper 的流。
- 补丁：修复用于现有索引的 DRIFT 搜索的社区 ID 加载
- 补丁：修复嵌入的错误分配
- 补丁：修复文档中向量存储和 drift 图像的初始默认值
- 补丁：修复嵌套 json 解析
- 补丁：修复小型输入集上 Drift Search 的一些边缘情况
- 补丁：修复嵌入的变量名
- 补丁：合并现有和新实体，并相应地更新值
- 补丁：将 text_embed 合并到 create-final-relationships 子流中。
- 补丁：将嵌入动词移到操作中。
- 补丁：移动动词。
- 补丁：优化创建基本文档子流
- 补丁：优化文本单元关系计数
- 补丁：map_query_to_entities() 中的性能优化
- 补丁：从最终社区和最终文本单元中删除 aggregate_df
- 补丁：删除重复的关系和节点
- 补丁：删除最终实体中未使用的列
- 补丁：将 api、reporter、callback 代码重组到单独的组件中。定义了调试配置文件。
- 补丁：在社区上下文历史构建中进行小清理
- 补丁：瞬态实体图和快照。
- 补丁：将增量索引更新到新的嵌入工作流
- 补丁：使用 mkdocs 进行文档
- 补丁：添加向量存储的向后兼容性补丁。
- 补丁：添加自动生成 CLI 文档
- 补丁：修复文档图像路径
- 补丁：重构向量存储的使用并更新对托管身份的支持
- 补丁：删除全局搜索中冗余的错误处理代码
- 补丁：重组 CLI 层

## 0.3.6

- 补丁：折叠 create_final_relationships。
- 补丁：依赖更新和清理

## 0.3.5

- 补丁：添加带有测试基础设施的复合动词。
- 补丁：折叠 create_final_communities。
- 补丁：折叠 create_final_text_units。
- 补丁：协变量动词折叠。
- 补丁：修复社区上下文构建器中的重复项
- 补丁：修复提示调整输出路径
- 补丁：修复种子硬编码初始化
- 补丁：修复聚类时的种子随机生成
- 补丁：改进日志记录。
- 补丁：设置 CLI 参数的默认值。
- 补丁：使用静态输出目录。

## 0.3.4

- 补丁：在本地搜索时深度复制 txt 单元以避免竞争条件
- 补丁：修复包含空描述的摘要

## 0.3.3

- 补丁：添加增量索引的入口点
- 补丁：清理和组织运行索引代码
- 补丁：一致的配置加载。解决了 #99 和 #1049
- 补丁：修复直接运行提示调整 API 时的循环依赖
- 补丁：修复嵌入的默认设置
- 补丁：修复自动调整的图像
- 补丁：修复图像宽度
- 补丁：修复了提示调整过程中的错误
- 补丁：重构本地搜索中的文本单元构建
- 补丁：更新提示调整文档
- 补丁：更新 create_pipeline_config.py
- 补丁：更新文档中的提示调整命令
- 补丁：添加从 azure blob 存储查询
- 补丁：修复不使用文件系统时将 base_dir 设置为完整路径。
- 补丁：修复 entity_extraction 中的策略配置

## 0.3.2

- 补丁：将上下文数据添加到查询 API 响应。
- 补丁：添加提示调整缺失的配置参数文档
- 补丁：添加 neo4j 社区笔记本
- 补丁：确保在运行提示调整时实体类型为 str
- 补丁：修复图提取期间的权重转换
- 补丁：补丁“过去”依赖问题
- 补丁：更新开发人员指南。
- 补丁：更新查询类型提示。
- 补丁：更改 lancedb 位置

## 0.3.1

- 补丁：添加预检检查以检查 LLM 连接。
- 补丁：添加对查询 CLI 的本地/全局搜索的流式传输支持
- 补丁：为社区报告生成添加对架构验证中浮点和整数的支持
- 补丁：避免在 gh-pages 发布时运行索引
- 补丁：实现索引 API
- 补丁：改进数据目录推断的过滤
- 补丁：更新到 nltk 3.9.1

## 0.3.0

- 次要：实现自动模板 API。
- 次要：实现查询引擎 API。
- 补丁：修复使用 json 进行非 ASCII 字符的文件转储
- 补丁：稳定查询上下文构建的烟雾测试
- 补丁：修复查询嵌入
- 补丁：修复动词中的 sort_context 和 max_tokens 参数

## 0.2.2

- 补丁：添加检查以查看本地搜索上下文中是否没有社区记录
- 补丁：添加单独的 Python 测试工作流
- 补丁：文档更新
- 补丁：在 4o 上运行烟雾测试

## 0.2.1

- 补丁：为 create_pipeline_config 中的向量存储添加了默认列。其他情况没有变化。
- 补丁：将全局搜索的 map 步骤中的 json 解析错误更改为警告
- 补丁：修复加载嵌入输入时本地搜索中断。默认将 overwrite 设置为 True，如向量存储配置的其余部分所示
- 补丁：修复 LLM 返回错误响应时的 json 解析
- 补丁：修复缺失的社区报告并重构社区上下文构建器
- 补丁：修复了擦除向量数据库的错误，添加了一个新参数来指定配置文件路径，并相应地更新了文档。
- 补丁：尝试在修复之前解析 json
- 补丁：使用更精细的示例更新提示调整元提示
- 补丁：更新默认实体提取和 gleaning 提示以减少幻觉
- 补丁：将 encoding-model 添加到实体/声明提取配置
- 补丁：将 encoding-model 添加到文本分块配置
- 补丁：将用户提示添加到历史跟踪 llm
- 补丁：更新配置读取器以允许零 gleans
- 补丁：更新配置读取器以允许空 chunk-by 数组
- 补丁：更新历史跟踪 LLM 以在输出历史中使用“assistant”而不是“system”。
- 补丁：在哈希键计算中使用 history 参数；将 history 输入添加到缓存数据

## 0.2.0

- 次要：添加基于内容的 KNN 用于选择提示调整少量示例
- 次要：将动态社区报告评级添加到提示调整引擎
- 补丁：添加基于分钟的速率限制并修复 rpm、tpm 设置
- 补丁：添加 N 参数支持
- 补丁：添加 CLI 标志以将默认值覆盖到提供的配置上。
- 补丁：添加文件加载时的异常处理
- 补丁：添加提示调整的语言支持
- 补丁：将 llm 参数添加到本地和全局搜索
- 补丁：修复文档中损坏的提示调整链接
- 补丁：修复查询调用中的增量无
- 补丁：修复 docsite 基本 URL
- 补丁：修复提示调整中的编码模型参数
- 补丁：修复 --limit 超出数据帧长度的问题
- 补丁：修复 Ruff 0.5.2
- 补丁：修复了基本的 OpenAI 嵌入无法与 Azure OpenAI LLM 协同工作的问题
- 补丁：修改 CHUNK_SIZE、CHUNK_OVERLAP 和 GLEANINGS 的默认值以减少时间和 LLM 调用
- 补丁：修复 community_report 在 settings.yaml 中不起作用
- 补丁：修复 llm 响应内容在查询中为 None
- 补丁：修复组织参数在查询期间无效的问题
- 补丁：删除重复的文件读取
- 补丁：支持非 open ai 模型配置以进行提示调整
- 补丁：对所有文件 IO 操作使用二进制 IO 处理

## 0.1.0

- 次要：首次发布