# 输出

默认管道生成一系列输出表，这些输出表与[概念知识模型](https://www.google.com/search?q=../index/default_dataflow.md)对齐。本页面描述了详细的输出表模式。默认情况下，我们将这些表作为 Parquet 文件写入磁盘。

## 共享字段

所有表都有两个标识符字段：

| 名称              | 类型 | 描述                         |
|-----------------|------|------------------------------|
| id              | str  | 生成的 UUID，确保全局唯一性     |
| human_readable_id | int  | 这是每次运行递增的短 ID。例如，我们将此短 ID 与生成摘要一起使用，这些摘要打印引用，以便于视觉交叉引用。 |

## communities（社区）

这是 Leiden 生成的最终社区列表。社区严格分层，随着聚类亲和力的缩小而细分为子社区。

| 名称              | 类型    | 描述                                                                                                                              |
|-----------------|---------|-----------------------------------------------------------------------------------------------------------------------------------|
| community       | int     | Leiden 为社区生成的聚类 ID。请注意，这些 ID 随深度递增，因此在社区层次结构的所有级别中都是唯一的。对于此表，`human_readable_id` 是 `community` ID 的副本，而不是普通的递增值。 |
| parent          | int     | 父社区 ID。                                                                                                                         |
| children        | int[]   | 子社区 ID 列表。                                                                                                                    |
| level           | int     | 社区在层次结构中的深度。                                                                                                                |
| title           | str     | 社区的友好名称。                                                                                                                      |
| entity_ids      | str[]   | 属于该社区的实体列表。                                                                                                                |
| relationship_ids | str[]   | 完全在该社区内的关系列表（源和目标都在该社区内）。                                                                                      |
| text_unit_ids   | str[]   | 社区中表示的文本单元列表。                                                                                                            |
| period          | str     | 摄取日期，用于增量更新合并。ISO8601                                                                                                  |
| size            | int     | 社区的大小（实体计数），用于增量更新合并。                                                                                                |

## community_reports（社区报告）

这是每个社区的汇总报告列表。

| 名称                 | 类型    | 描述                                                              |
|--------------------|---------|-------------------------------------------------------------------|
| community          | int     | 此报告适用的社区短 ID。                                               |
| parent             | int     | 父社区 ID。                                                       |
| children           | int[]   | 子社区 ID 列表。                                                  |
| level              | int     | 此报告适用的社区级别。                                                |
| title              | str     | LM 生成的报告标题。                                               |
| summary            | str     | LM 生成的报告摘要。                                               |
| full_content       | str     | LM 生成的完整报告。                                               |
| rank               | float   | 基于成员实体显著性的 LM 派生报告相关性排名。                           |
| rating_explanation | str     | LM 派生的排名解释。                                               |
| findings           | dict    | LM 派生的社区前 5-10 个洞察列表。包含 `summary` 和 `explanation` 值。 |
| full_content_json  | json    | LM 返回的完整 JSON 输出。大多数字段都已提取到列中，但此 JSON 用于查询摘要，因此我们保留它以允许最终用户调整提示以添加字段/内容。 |
| period             | str     | 摄取日期，用于增量更新合并。ISO8601                               |
| size               | int     | 社区的大小（实体计数），用于增量更新合并。                             |

## covariates（协变量）

（可选）如果启用了声明提取，这是提取的协变量列表。请注意，声明通常围绕识别欺诈等恶意行为，因此它们并非对所有数据集都有用。

| 名称           | 类型 | 描述                                       |
|--------------|------|--------------------------------------------|
| covariate_type | str  | 默认情况下，这始终是“claim”。                   |
| type         | str  | 声明类型的性质。                                   |
| description  | str  | LM 生成的行为描述。                              |
| subject_id   | str  | 源实体（执行所声称行为的实体）的名称。               |
| object_id    | str  | 目标实体（所声称行为作用的实体）的名称。               |
| status       | str  | LM 派生的声明正确性评估。其中之一：[TRUE, FALSE, SUSPECTED] |
| start_date   | str  | LM 派生的所声称活动的开始日期。ISO8601             |
| end_date     | str  | LM 派生的所声称活动的结束日期。ISO8601             |
| source_text  | str  | 包含所声称行为的短文本字符串。                     |
| text_unit_id | str  | 提取声明文本的文本单元 ID。                      |

## documents（文档）

导入后的文档内容列表。

| 名称          | 类型    | 描述                                     |
|-------------|---------|------------------------------------------|
| title       | str     | 文件名，除非在 CSV 导入期间另行配置。           |
| text        | str     | 文档的完整文本。                             |
| text_unit_ids | str[]   | 从文档中解析的文本单元（块）列表。               |
| metadata    | dict    | 如果在 CSV 导入期间指定，这是文档元数据的字典。 |

## entities（实体）

LM 在数据中找到的所有实体列表。

| 名称          | 类型    | 描述                                                                                                        |
|-------------|---------|-------------------------------------------------------------------------------------------------------------|
| title       | str     | 实体的名称。                                                                                                |
| type        | str     | 实体的类型。默认情况下，除非另行配置或使用自动调优，否则这将是“organization”、“person”、“geo”或“event”。 |
| description | str     | 实体的文本描述。实体可能存在于许多文本单元中，因此这是 LM 派生的所有描述的摘要。                               |
| text_unit_ids | str[]   | 包含该实体的文本单元列表。                                                                                  |
| frequency   | int     | 找到该实体的文本单元的计数。                                                                                |
| degree      | int     | 图中的节点度（连接性）。                                                                                    |
| x           | float   | 节点在视觉布局中的 X 位置。如果未启用图嵌入和 UMAP，则此值为 0。                                            |
| y           | float   | 节点在视觉布局中的 Y 位置。如果未启用图嵌入和 UMAP，则此值为 0。                                            |

## relationships（关系）

LM 在数据中找到的所有实体到实体关系的列表。这也是图的**边列表**。

| 名称            | 类型    | 描述                                                             |
|---------------|---------|------------------------------------------------------------------|
| source        | str     | 源实体的名称。                                                   |
| target        | str     | 目标实体的名称。                                                   |
| description   | str     | LM 派生的关系描述。另请参见实体描述的注意事项。                    |
| weight        | float   | 图中边的权重。这是根据每个关系实例的 LM 派生“强度”度量求和的。     |
| combined_degree | int     | 源节点和目标节点度的总和。                                         |
| text_unit_ids | str[]   | 找到该关系的文本单元列表。                                         |

## text_units（文本单元）

从输入文档中解析的所有文本块的列表。

| 名称             | 类型    | 描述                                                                                                                            |
|----------------|---------|---------------------------------------------------------------------------------------------------------------------------------|
| text           | str     | 块的原始完整文本。                                                                                                              |
| n_tokens       | int     | 块中的令牌数量。这通常应与 `chunk_size` 配置参数匹配，但最后一个块通常较短。                                                     |
| document_ids   | str[]   | 块来自的文档 ID 列表。由于我们的默认分组，这通常只有一个，但对于非常短的文本文档（例如，微博），可以配置为使文本单元跨越多个文档。 |
| entity_ids     | str[]   | 在文本单元中找到的实体列表。                                                                                                    |
| relationships_ids | str[]   | 在文本单元中找到的关系列表。                                                                                                    |
| covariate_ids  | str[]   | 在文本单元中找到的协变量（可选）列表。                                                                                          |